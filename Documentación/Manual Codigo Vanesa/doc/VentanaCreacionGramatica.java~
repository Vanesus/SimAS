// SimAS / Editor
// Ventana Creacion Gramatica

package es.uco.simas.editor;

import es.uco.simas.util.gramatica.Gramatica;
import javax.swing.DefaultListModel;

/**
 * @author vanesa
 */
public class VentanaCreacionGramatica extends javax.swing.JFrame {

    private  PanelCreacionGramaticaPaso1 paso1 ;
    private  PanelCreacionGramaticaPaso2 paso2 ;
    private  PanelCreacionGramaticaPaso3 paso3 ;
    private  PanelCreacionGramaticaPaso4 paso4 ;
    private  Editor ventanaPadre ;
    
    public VentanaCreacionGramatica(Editor ventanaPadre, Gramatica gr) {
        
        initComponents();
        this.setResizable(false);
        this.ventanaPadre =ventanaPadre;
        PanelCreacionGramaticaPaso1 paso1 = new PanelCreacionGramaticaPaso1(this);
        this.paso1 =paso1;
        PanelCreacionGramaticaPaso2 paso2 = new PanelCreacionGramaticaPaso2(this);
        this.paso2 =paso2;
        PanelCreacionGramaticaPaso3 paso3 = new PanelCreacionGramaticaPaso3(this);
        this.paso3 =paso3;
        PanelCreacionGramaticaPaso4 paso4 = new PanelCreacionGramaticaPaso4(this);
        this.paso4 =paso4;
        this.getContentPane().removeAll();
        this.setContentPane(this.paso1);
        this.pack();
        this.validate();
        this.setTitle("Asistente de creación de gramáticas. Paso 1 de 4");
        this.setVisible(true);
        
        if(gr!=null){
            this.paso1.setNombre(gr.getNombre());
            this.paso1.setDescripcion(gr.getDescripcion());
            this.paso2.asignarListaSimbolosTerminales(gr.getTerminales());
            this.paso2.asignarListaSimbolosNoTerminales(gr.getNoTerminales());
            this.paso3.asignarProducciones(gr.getProducciones());
            this.paso4.setSimboloInicial(gr.getSimbInicial());
        }
    }
    
    public    void cambiarPaso( int paso)  {
        switch(paso){
          case 1: {
            this.setContentPane(this.paso1);
            this.pack();
            this.setVisible(true);
            this.validate();
            this.setTitle("Asistente de creacion de gramáticas. Paso 1 de 4");
            break;
          }
          case 2: {
            this.setContentPane(this.paso2);
            this.pack();
            this.setVisible(true);
            this.validate();
            this.setTitle("Asistente de creacion de gramáticas. Paso 2 de 4");
            break;
          }
          case 3: {
            this.setContentPane(this.paso3);
            this.pack();
            this.setVisible(true);
            this.validate();
            this.setTitle("Asistente de creacion de gramáticas. Paso 3 de 4");
            break;
          }
          case 4:  {
            this.setContentPane(this.paso4);
            this.pack();
            if(this.paso2.getSimbolosNoTerminales()!=  null) {
              this.paso4.setSimbolosNoTerminales(this.paso2.getSimbolosNoTerminales());
            }
            this.setVisible(true);
            this.validate();
            this.setTitle("Asistente de creacion de gramáticas. Paso 4 de 4");
          }
       }
    }
    
     public    DefaultListModel getSimbolosTerminales( )     {
       return this.paso2.getSimbolosTerminales();
    }

    public    DefaultListModel getSimbolosNoTerminales( )     {
       return this.paso2.getSimbolosNoTerminales();
    }
    
    public DefaultListModel getProducciones(){
        return this.paso3.getProducciones();
    }
    
    public void setProducciones(DefaultListModel pr){
        this.paso3.asignarProducciones(pr);
    }
     
    public    void finalizarAsistente( ) {
        Gramatica gramatica= new Gramatica(this.paso1.getNombreGramatica(), this.paso1.getDescripcionGramatica());
        gramatica.setVocabulario(this.paso2.getSimbolosNoTerminales(),this.paso2.getSimbolosTerminales());
        gramatica.setNoTerminales(this.paso2.getSimbolosNoTerminales());
        gramatica.setTerminales(this.paso2.getSimbolosTerminales());
        gramatica.setProducciones(this.paso3.getProducciones());      
        gramatica.setSimbInicial(this.paso4.getSimboloInicial());

        Editor p1 = new Editor(gramatica);
        this.ventanaPadre.dispose();
        p1.setVisible(true);
        p1.setLocationRelativeTo(null);
        this.dispose();
 }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    //@SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jLabel1 = new javax.swing.JLabel();

        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);

        jLabel1.setText("Ventana");

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(185, 185, 185)
                .addComponent(jLabel1)
                .addContainerGap(370, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(39, 39, 39)
                .addComponent(jLabel1)
                .addContainerGap(358, Short.MAX_VALUE))
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents
/**/
    /**
     * @param args the command line arguments
     */

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JLabel jLabel1;
    // End of variables declaration//GEN-END:variables

}
